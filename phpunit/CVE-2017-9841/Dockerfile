FROM php:7.2-apache

LABEL maintainer="phith0n <root@leavesongs.com>"

RUN sed -i 's/deb.debian.org/mirrors.ustc.edu.cn/g' /etc/apt/sources.list \
    && sed -i 's|security.debian.org/debian-security|mirrors.ustc.edu.cn/debian-security|g' /etc/apt/sources.list \
    && apt-get update \
    && apt-get install -y --no-install-recommends unzip \
    && curl -#sL https://getcomposer.org/download/1.6.5/composer.phar -o /usr/local/bin/composer \
    && chmod +x /usr/local/bin/composer \
    && cd /var/www/html \
    && composer config -g repo.packagist composer https://packagist.phpcomposer.com \
    && composer require phpunit/phpunit:5.6.2 \
    && apt-get purge --auto-remove -y unzip \
    && rm -rf /var/lib/apt/lists/*