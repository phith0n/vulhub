FROM vulhub/php:5.6-apache

MAINTAINER phithon <root@leavesongs.com>

COPY www/* /var/www/html/

RUN set -ex \
    && sed -i 's/deb.debian.org/mirrors.ustc.edu.cn/g' /etc/apt/sources.list \
    && sed -i 's|security.debian.org|mirrors.ustc.edu.cn/debian-security/|g' /etc/apt/sources.list \
    && apt-get update \
    && apt-get install -y --no-install-recommends git \
    && cd /var/www/html/ \
    && curl -sSL https://getcomposer.org/installer | php \
    && php composer.phar config -g repo.packagist composer https://packagist.phpcomposer.com \
    && php composer.phar install \
    && rm -rf /var/lib/apt/lists/*